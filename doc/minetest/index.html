<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>The Minetest Language</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html" class="tocviewselflink" data-pltdoc="x">The Minetest Language</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Basics%29" class="tocviewlink" data-pltdoc="x">Basics</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Images%29" class="tocviewlink" data-pltdoc="x">Images</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Block_.Assets%29" class="tocviewlink" data-pltdoc="x">Block Assets</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Item_.Assets%29" class="tocviewlink" data-pltdoc="x">Item Assets</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Entity_.Assets%29" class="tocviewlink" data-pltdoc="x">Entity Assets</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Schematic__.Assets_%29" class="tocviewlink" data-pltdoc="x">Schematic "Assets"</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Particle__.Assets_%29" class="tocviewlink" data-pltdoc="x">Particle "Assets"</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Recipes%29" class="tocviewlink" data-pltdoc="x">Recipes</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Game_.Rules%29" class="tocviewlink" data-pltdoc="x">Game Rules</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="file:///home/thoughtstem/Desktop/minetest/doc/minetest.html#%28part._.Full_.A.P.I%29" class="tocviewlink" data-pltdoc="x">Full API</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.The_.Minetest_.Language%29" class="tocsubseclink" data-pltdoc="x">The Minetest Language</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Basics%29" class="tocsubseclink" data-pltdoc="x">Basics</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Images%29" class="tocsubseclink" data-pltdoc="x">Images</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Block_.Assets%29" class="tocsubseclink" data-pltdoc="x">Block Assets</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Item_.Assets%29" class="tocsubseclink" data-pltdoc="x">Item Assets</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Entity_.Assets%29" class="tocsubseclink" data-pltdoc="x">Entity Assets</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Schematic__.Assets_%29" class="tocsubseclink" data-pltdoc="x">Schematic "Assets"</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Particle__.Assets_%29" class="tocsubseclink" data-pltdoc="x">Particle "Assets"</a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.Recipes%29" class="tocsubseclink" data-pltdoc="x">Recipes</a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._.Game_.Rules%29" class="tocsubseclink" data-pltdoc="x">Game Rules</a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._.Full_.A.P.I%29" class="tocsubseclink" data-pltdoc="x">Full API</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.11</span></div><h2><a name="(part._.The_.Minetest_.Language)"></a>The Minetest Language</h2><h3>1<tt>&nbsp;</tt><a name="(part._.Basics)"></a>Basics</h3><p>Let&rsquo;s start with an example that shows the three basic
principles of developing with #lang minetest</p><ul><li><p>Define images</p></li><li><p>Use images to define assets</p></li><li><p>Use assets to define game rules</p></li></ul><p>Here we go!</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 1: Define your images</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">red-texture</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">green-texture</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 2: Define your assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Red Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">red-texture</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="hspace">&nbsp;</span><span class="RktVal">"Green Block"</span><span class="hspace">&nbsp;</span><span class="RktSym">green-texture</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 3: Define your rules</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Of course, there&rsquo;s nothing stopping you from combining steps
1 and 2.  For example, this is fine:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Steps 1 and 2: Define your images and assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Red Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="hspace">&nbsp;</span><span class="RktVal">"Green Block"</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 3: Define your rules</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>However, the real power of #lang minetest comes from leveraging
the power of 2htdp/image to procedurally generate your assets.
So things can sometimes be cleaner to separate your workflow
into the three aforementioned steps.</p><p>Here&rsquo;s a more complex example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 1: Define your images</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">noise</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">overlay</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">31</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">red-texture</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">green-texture</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"green"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 2: Define your assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Red Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">red-texture</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="hspace">&nbsp;</span><span class="RktVal">"Green Block"</span><span class="hspace">&nbsp;</span><span class="RktSym">green-texture</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Step 3: Define your rules</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">red</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This does the same thing as the previous two examples. However,
there is now a function that can be used to produce different colored
blocks:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">noise</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">overlay</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">31</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">color</span></span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">square</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_3.png" alt="image" width="39" height="39"/></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"green"</span><span class="RktPn">)</span></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_4.png" alt="image" width="39" height="39"/></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_5.png" alt="image" width="39" height="39"/></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"cyan"</span><span class="RktPn">)</span></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_6.png" alt="image" width="39" height="39"/></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"purple"</span><span class="RktPn">)</span></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_7.png" alt="image" width="39" height="39"/></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">overlay</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">scale</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"green"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-texture</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_8.png" alt="image" width="39" height="39"/></p></td></tr></table></blockquote></div></p><p>Now that we&rsquo;ve seen how #lang minetest works at a high level,
Let&rsquo;s look at each part in more detail.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Images)"></a>Images</h3><p>This is a short section, but it&rsquo;s really the most important.</p><p>If you&rsquo;re new to Racket, you should familiarize yourself with
functional programming and the 2htdp/image library by reading
through the excellent book:</p><p>"How to Design Programs" at http://www.ccs.neu.edu/home/matthias/HtDP2e/</p><h3>3<tt>&nbsp;</tt><a name="(part._.Block_.Assets)"></a>Block Assets</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">define-block</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">description</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">id</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">description</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">image</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">image?</span></span></span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Adds a new 1-texture block to the current mod.</div></p><p>To do a multi-texture block, you need to do this in two steps.</p><p>First, define the block.  Then override the single texture
with multiple textures.  To do this, we use the add-behaviour-to
form.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">piggy</span><span class="hspace">&nbsp;</span><span class="RktVal">"Piggy"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_9.png" alt="image" width="46" height="46"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">add-behaviour-to</span><span class="hspace">&nbsp;</span><span class="RktSym">piggy</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tiles</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_10.png" alt="image" width="46" height="46"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_11.png" alt="image" width="46" height="46"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_12.png" alt="image" width="46" height="46"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_13.png" alt="image" width="46" height="46"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_9.png" alt="image" width="46" height="46"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_14.png" alt="image" width="46" height="46"/><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Here, I&rsquo;m overriding the "tiles" attribute of the piggy block.</p><p>(When using add-behaviour-to, it can help to know a bit about
the Lua API for Modding Minetest.  It lets you set any attribute
You could set when calling Lua&rsquo;s register_node function.  I&rsquo;m not
going to re-document the Lua API here.)</p><h3>4<tt>&nbsp;</tt><a name="(part._.Item_.Assets)"></a>Item Assets</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">define-item</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">description</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">id</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">description</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">image</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">image?</span></span></span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Adds a new item to the current mod.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-item</span><span class="hspace">&nbsp;</span><span class="RktSym">zelda-thing</span><span class="hspace">&nbsp;</span><span class="RktVal">"Zelda Thing"</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">triangle</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>... where the image above evaluates as follows:</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">triangle</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_15.png" alt="image" width="46" height="41"/></p></td></tr></table></blockquote></div></p><p>Note: It&rsquo;s often nice to use the <span class="RktSym">noise</span> function to
make textures look more like they belong in the world of
Minetest.  Here&rsquo;s an example (where I made the image larger
just so you could see the texturing):</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">noise</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri-fract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">triangle</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktVal">"solid"</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_16.png" alt="image" width="206" height="179"/></p></td></tr></table></blockquote></div></p><p>(Using define-block compiles to a Lua register_craftitem call.
So if you&rsquo;re interested
in adding more complex behaviour, you can use add-behaviour-to
to set whatever attributes you could set using that Lua call.)</p><h3>5<tt>&nbsp;</tt><a name="(part._.Entity_.Assets)"></a>Entity Assets</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">define-entity</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">description</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">id</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">description</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktSym">images</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">image?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Adds a new entity to the current mod.</div></p><p>Note that (unlike items and blocks) entities won&rsquo;t magically
appear in your inventory.  You need to add a game rule to
get them to spawn on some action (i.e. a block punch).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">pig-spawner</span></td></tr><tr><td><span class="RktVal">"Piggy Spawner"</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_17.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_18.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_19.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_20.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_21.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_22.png" alt="image" width="22" height="22"/><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-entity</span><span class="hspace">&nbsp;</span><span class="RktSym">pig</span></td></tr><tr><td><span class="RktVal">"Piggy"</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list</span></span></span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_17.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_18.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_19.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_20.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_21.png" alt="image" width="22" height="22"/><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_22.png" alt="image" width="22" height="22"/><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">pig-spawner</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">spawn</span><span class="hspace">&nbsp;</span><span class="RktSym">pig</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><p>So the default behaviour of these entities
is that they run around in a rather entertaining way instead
of sitting there boringly like a block.</p><p>(Also note that define-entity compiles down to PilzAdams&rsquo;s
add_mob function.  As usual, you can reference the Lua docs and override the
defaults with add-behaviour-to.)</p><h3>6<tt>&nbsp;</tt><a name="(part._.Schematic__.Assets_)"></a>Schematic "Assets"</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">schematic</span></span><span class="hspace">&nbsp;</span><span class="RktVar">mappings</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">schematic?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mappings</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">list?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">image?</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a schematic.  Each <span class="RktVar">image</span> becomes
a vertical layer in the schematic.  (Think of it like a
3d printer, where each image will get printed on top of the
other.)</div></p><p>The pairs in <span class="RktVar">mappings</span> say how colors will map to
 block types.  You can reference your own blocks in the mapping
 or default blocks.  Colors not explicitly mentioned in the
 mapping will be rounded to the nearest color that is mentioned.</p><p>For convenience the <span class="RktSym">wool-mapping</span> can be used to
 map all colors to the "nearest wool".</p><p>Schematics will not magically appear in game.  They have to
be placed as a result of a user action (i.e. a block punch).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">spawner</span><span class="hspace">&nbsp;</span><span class="RktVal">"Spawner"</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_21.png" alt="image" width="22" height="22"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">tree-schem</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">schematic</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mapping</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"brown"</span><span class="hspace">&nbsp;</span><span class="RktSym">wood</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"green"</span><span class="hspace">&nbsp;</span><span class="RktSym">leaves</span><span class="RktPn">)</span></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_23.png" alt="image" width="16" height="16"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_24.png" alt="image" width="20" height="20"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_24.png" alt="image" width="20" height="20"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_24.png" alt="image" width="20" height="20"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_24.png" alt="image" width="20" height="20"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_23.png" alt="image" width="16" height="16"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/></td></tr><tr><td><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_25.png" alt="image" width="10" height="10"/><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">pig-schem</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">schematic</span><span class="hspace">&nbsp;</span><span class="RktSym">wool-mapping</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_21.png" alt="image" width="22" height="22"/><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">spawner-block</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-schematic</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-schem</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-schematic</span><span class="hspace">&nbsp;</span><span class="RktSym">pig-schem</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><h3>7<tt>&nbsp;</tt><a name="(part._.Particle__.Assets_)"></a>Particle "Assets"</h3><p>Particles are not assets.  But they can be spawned when
players interact with assets (items, blocks, entities).</p><p>This requires a simple game rule.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">particle-block</span><span class="hspace">&nbsp;</span><span class="RktVal">"Particle Block"</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_26.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">game-rule</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">on:</span><span class="hspace">&nbsp;</span><span class="RktSym">block</span><span class="hspace">&nbsp;</span><span class="RktSym">punch</span><span class="hspace">&nbsp;</span><span class="RktSym">particle-block</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">do:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">particles</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_27.png" alt="image" width="64" height="61"/><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><h3>8<tt>&nbsp;</tt><a name="(part._.Recipes)"></a>Recipes</h3><p>Recipes are created with <span class="RktSym">define-recipe</span>. You can
create shaped recipes or shapeless recipes.  You can also
create recipes with your own blocks and items as well as
default blocks and items.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">minetest</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red-block</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Red Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">green-block</span><span class="hspace">&nbsp;</span><span class="RktVal">"Green Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">blue-block</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Blue Block"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_28.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-block</span><span class="hspace">&nbsp;</span><span class="RktSym">yellow-block</span><span class="hspace">&nbsp;</span><span class="RktVal">"Yellow Block"</span><span class="hspace">&nbsp;</span><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_26.png" alt="image" width="39" height="39"/><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Recipe with user-defined assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-recipe</span><span class="hspace">&nbsp;</span><span class="RktSym">my-recipe1</span></td></tr><tr><td><span class="RktSym">make:</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">green-block</span></td></tr><tr><td><span class="RktSym">from:</span><span class="hspace">&nbsp;</span><span class="RktSym">yellow-block</span><span class="hspace">&nbsp;</span><span class="RktSym">blue-block</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Recipe with default assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-recipe</span><span class="hspace">&nbsp;</span><span class="RktSym">my-recipe2</span></td></tr><tr><td><span class="RktSym">make:</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">green-block</span></td></tr><tr><td><span class="RktSym">from:</span><span class="hspace">&nbsp;</span><span class="RktSym">sword_diamond</span><span class="hspace">&nbsp;</span><span class="RktSym">obsidian</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Shaped recipe with user-defined assets</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-recipe</span><span class="hspace">&nbsp;</span><span class="RktSym">my-recipe3</span></td></tr><tr><td><span class="RktSym">make:</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym">purple-block</span></td></tr><tr><td><span class="RktSym">from:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blue-block</span><span class="hspace">&nbsp;</span><span class="RktSym">red-block</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">red-block</span><span class="hspace">&nbsp;</span><span class="RktSym">blue-block</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">compile-mod</span><span class="hspace">&nbsp;</span><span class="RktSym">my-mod</span><span class="RktPn">)</span></td></tr></table></blockquote><h3>9<tt>&nbsp;</tt><a name="(part._.Game_.Rules)"></a>Game Rules</h3><p>TODO</p><h3>10<tt>&nbsp;</tt><a name="(part._.Full_.A.P.I)"></a>Full API</h3><p>(A lot is show by example above, but there should still be a
full inventory of everything.)</p><p>TODO: Add all default item key-words
TODO: Add all available callbacks
TODO: List all the Lua stuff that can be overridden with add-behaviour-to
TODO: List all forms and functions.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>